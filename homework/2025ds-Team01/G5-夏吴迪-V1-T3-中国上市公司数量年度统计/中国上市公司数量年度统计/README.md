# 中国上市公司数量年度统计分析 - 真实数据使用说明

## 📈 项目概述

本项目现已全面支持**真实股票数据**，使用 `akshare` 库从东方财富网等权威金融数据源获取最新的中国股票市场数据。

## 🚀 快速开始

### 1. 环境要求
- **Python 3.10+** （推荐使用 Python 3.10.2）
- 网络连接（用于获取实时数据）

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 运行真实数据分析
```bash
# 方式1: 使用命令行脚本
python run_analysis_real.py

# 方式2: 使用Jupyter笔记本
jupyter notebook China_stock_analysis.ipynb
```

## 📊 数据来源与特点

### 🔍 数据来源
- **主要数据源**: akshare库（中国金融数据接口）
- **底层数据**: 东方财富网、新浪财经等权威金融网站
- **数据类型**: 实时股票市场数据

### ✅ 数据优势
1. **真实性**: 100%真实的市场数据，非模拟数据
2. **实时性**: 获取最新的股票信息和市场状态
3. **完整性**: 覆盖上海、深圳、北京三大交易所
4. **准确性**: 来源于权威金融数据提供商

## 📈 功能对比

| 功能项目 | 模拟数据版本 | 真实数据版本 |
|---------|------------|------------|
| 数据来源 | 算法生成的模拟数据 | akshare获取的真实数据 |
| 数据实时性 | 静态数据 | 实时更新 |
| 股票数量 | ~4,690只 | ~5,413只（实际数量） |
| 交易所覆盖 | 模拟三大交易所 | 真实三大交易所数据 |
| 行业分类 | 模拟行业分布 | 真实行业分类 |
| 适用场景 | 学习演示 | 实际研究分析 |

## 🔄 主要改进

### 1. 数据收集模块
- **新增**: `src/data_collector_real.py` - 真实数据收集器
- **使用**: `RealStockDataCollector` 类替代 `StockDataCollector`
- **功能**: 直接从akshare API获取最新数据

### 2. 分析脚本
- **新增**: `run_analysis_real.py` - 真实数据分析脚本
- **特点**: 完整的真实数据分析流程

### 3. Jupyter笔记本
- **更新**: `China_stock_analysis.ipynb` 已修改为使用真实数据
- **说明**: 笔记本中已将数据收集器切换为真实版本

## 📊 数据输出

### 原始数据文件
- `stock_list_all_real_YYYYMMDD_HHMMSS.csv` - 所有股票基本信息
- `stock_list_上海交易所_YYYYMMDD_HHMMSS.csv` - 上海交易所股票
- `stock_list_深圳交易所_YYYYMMDD_HHMMSS.csv` - 深圳交易所股票
- `stock_list_北京交易所_YYYYMMDD_HHMMSS.csv` - 北京交易所股票

### 分析结果
- **Excel报告**: `中国股票市场分析报告_真实数据_YYYYMMDD_HHMMSS.xlsx`
- **可视化图表**: PNG格式的统计图表
- **交互式仪表板**: HTML格式的交互式分析

## 🎯 实际数据示例

根据最新运行结果（2025年5月29日）:

### 📈 总体规模
- **上市公司总数**: 5,413家

### 🏢 交易所分布
- **深圳交易所**: 2,387家 (44.1%)
- **上海交易所**: 2,279家 (42.1%)
- **其他**: 505家 (9.3%)
- **北京交易所**: 242家 (4.5%)

### 📋 板块分布
- **主板**: 2,214家 (40.9%)
- **创业板**: 942家 (17.4%)
- **中小板**: 924家 (17.1%)
- **科创板**: 586家 (10.8%)
- **其他**: 505家 (9.3%)
- **北交所板块**: 242家 (4.5%)

## ⚠️ 注意事项

### 1. 网络要求
- 确保有稳定的网络连接
- 部分API可能有调用频率限制

### 2. 数据获取时间
- 真实数据获取需要一定时间（通常1-3分钟）
- 建议在网络状况良好时运行

### 3. 数据时效性
- 数据反映获取时的市场状态
- 建议定期重新运行以获取最新数据

## 🛠️ 故障排除

### 问题1: akshare导入失败
```bash
# 解决方案
pip install akshare --upgrade
```

### 问题2: 数据获取超时
```bash
# 检查网络连接，重试运行
python run_analysis_real.py
```

### 问题3: 模块导入错误
```bash
# 确保在正确目录下运行
cd 项目根目录
python run_analysis_real.py
```

## 📞 技术支持

如遇到问题，请检查：
1. Python版本是否为3.10+
2. 所有依赖包是否正确安装
3. 网络连接是否正常
4. akshare库是否为最新版本

---

**🎉 现在您可以使用真实的中国股票市场数据进行分析了！** 