---
### ------------------- 幻灯片还是普通网页
marp: true
#marp: false

### ------------------- 幻灯片尺寸，宽版：4:3
size: 16:9
#size: 4:3

### ------------------- 是否显示页码
paginate: true  
#paginate: false

### ------------------- 页眉 (备选的用 '#' 注释掉)
# header: lianxh.cn
#header: '[连享会](https://www.lianxh.cn)'
#header: '[lianxh.cn](https://www.lianxh.cn/news/46917f1076104.html)'

### ------------------- 页脚 (备选的用 '#' 注释掉)
#footer: 'lianx.cn Marp 模板'
footer: '连享会&nbsp;|&nbsp;[lianxh.cn](https://www.lianxh.cn)&nbsp;|&nbsp;[Bilibili](https://space.bilibili.com/546535876)'
#footer: '![20230202003318](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230202003318.png)'
---

<!-- 
Notes: 
1. 选中一段文本，按快捷键 'Ctrl+/' 可以将其注释掉；再次操作可以解除 
2. header, footer 后面的文本需要用单引号引起来，否则会有语法错误
3. '#size: 16:9' 不能写为 'size:16:9'，即 'size:' 后要有一个空格
-->



<!-- Global style: 设置标题字号、颜色 -->
<!-- Global style: 正文字号、颜色 -->
<style>
/*一级标题局中*/
section.lead h1 {
  text-align: center; /*其他参数：left, right*/
  /*使用方法：
  <!-- _class: lead -->
  */
}
section {
  font-size: 22px; 
}
h1 {
  color: blackyellow;
}
h2 {
  color: green;
}
h3 {
  color: darkblue;
}
h4 {
  color: brown;
  /*font-size: 28px; */
}
/* 右下角添加页码 */
section::after {
  /*font-weight: bold; */
  /*text-shadow: 1px 1px 0 #fff; */
/*  content: 'Page ' attr(data-marpit-pagination) ' / ' attr(data-marpit-pagination-total); */
  content: attr(data-marpit-pagination) '/' attr(data-marpit-pagination-total); 
}
header,
footer {
  position: absolute;
  left: 50px;
  right: 50px;
  height: 25px;
}
</style>

<!--顶部文字-->
[lianxh.cn](https://www.lianxh.cn/news/46917f1076104.html) 

<br>

<!--封面图片-->
![bg right:50% w:400 brightness:. sepia:50%](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20220722114227.png) 

<!--幻灯片标题-->
# 数据分析概览


<br>
<br>

<!--作者信息-->
[连玉君](https://www.lianxh.cn) (中山大学)
arlionn@163.com

<br>


> &#x1F34E; **课程主页**：[gitee.com/arlionn/ds](https://gitee.com/arlionn/dsfinance/wikis)




--- - --

# 概览

- 数据分析的目的
- 分析方法
- 模型设定
- 典型估计方法

--- - --
<!-- backgroundColor: #C1CDCD -->
## 分析目的 
- 解释
- 预测
- 政策评价
- 可视化
--- - --
<!-- backgroundColor: #FFFFF9 -->
## 分析目的 1：解释

- 解释现有理论：货币政策 &rarr; 信贷政策 &rarr; 违约概率
  
- 估计特定参数：信贷需求弹性 (降息 &rarr; 按揭申请；个人养老金需求)
- 相关性分析：影响因素 (精准营销)
  - 企业贷款 &rarr; 高净值客户 &rarr; 私人银行 &rarr; 信托 

--- - --

## 分析目的 2：预测

- 放贷 / 违约行为

- 突发/偶发事件
- 持续时间 (生存分析)
  - 延期还款天数；延迟回复天数；提前还贷周数
- 投资与否 / 投资时机 



--- - --

## 分析目的 3：政策评价

  - 三条红杠
    - 房产企业的违约风险
    - 银行的信用风险、利率风险 ……
  - 日本：1985 年，广场协议 &rarr; 失去的 10 (20) 年 ?
  - 单一处理对象
    - 恒大 v.s 泰禾 &emsp; | &emsp; 中金 + 中投
  - 政策优化 (预测问题 + 反事实模拟)
    - 美国全面关税

--- - --

## 分析目的 4：可视化

> Source: 连小白, 2025, [GMD：最新全球宏观数据库-243个国家46个宏观变量](https://www.lianxh.cn/details/1559.html). [GMD Database](https://www.globalmacrodata.com/data.html)

---

<center>

![w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/gmd_stylized_fact_trade.png)

</center>


--- - --

<center>

![w:1200](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/c11b52779a87dd88ce6bbd2c098d635.png)

</center>


--- - --

## 分析目的 4：可视化

<br>
<br>

  - 呈现：分类、对比、分布
  - 3D、多维度、实时
  - 动态变化

<br>

> Source: ：[空间计量溢出效应](https://www.lianxh.cn/news/0b822f835c9d5.html)


![bg right:53% w:600](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/071632_bb2d5064_1522177.gif)



--- - --
## 理论是根基

- 靶子：确定数据分析的目标
- 理论模型 $\leftarrow \rightarrow$ 经验证据
  - 经济学领域 | 金融领域 | 机器学习
- 关键点
  - 清晰界定核心概念 $(y, x, z)$
  - 理论框架: 经典模型、经典理论、推理
    - 误区 1: 用前期文献的结论作为你的研究假设
    - 误区 2: 片面陈述 (引用) 前期文献的结论作为论据
    - 误区 3: 理论分析就是数理模型
- 研究假设: 明确，兼顾数据质量和数据可得性
- 实证部分与理论部分的衔接

--- - --

### 理论是根基：一个例子

<br>

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915162528.png)

--- - --

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915164409.png)

--- - --

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915162742.png)

--- - --

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915162814.png)




> **Source**: Arora, A. Juvenile crime and anticipated punishment. American Economic Journal: Economic Policy, 2023: Forthcoming. PDF: https://conference.iza.org/conference_files/WoLabConf_2018/arora_a26260.pdf 



--- - --

目标函数：
$$
\Omega(Q)=\max _Q\{p(R-C)+(1-p) R\}
$$

预期收益函数：

$$
R=r_0 Q+J(a g e \geq 16) \theta Q
$$

预期成本函数：

$$
\begin{aligned}
C & =C_0+J(\text { age } \geq 16) \eta \Delta C \\
& =\frac{1}{2} \varphi_0 Q^2+\frac{1}{2} J(\text { age } \geq 16) \alpha \eta Q^2
\end{aligned}
$$

--- - --
求解：
$$
Q_0^*=\left.Q^*\right|_{J=0}=\frac{r_0}{p \varphi_0} \qquad Q_1^*=\left.Q^*\right|_{J=1}=\frac{r_1}{p \varphi_1}
$$

识别依据：
$$
\Delta Q^*=Q_1^*-Q_0^*=\underbrace{-(1-\tau) Q_0^*}_{T E}+\underbrace{\tau \Delta Q_{10}^*}_{\text {Bias }}
$$

其中, $\tau=\frac{\varphi_0}{\varphi_1}=\frac{\varphi_{\mathrm{o}}}{\varphi_{\mathrm{o}}+\alpha \eta}, Q_{10}^*=\frac{\theta}{p \varphi_{\mathrm{o}}}$

识别策略：`DID-RDD`

$$
\widehat{T E}=\Delta \Delta Q^*=\Delta Q_{\eta \rightarrow 1}^*-\Delta Q_{\eta \rightarrow 0}^*
$$

--- - --

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915163302.png)

--- - --

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915164658.png)


--- - --

## 数据分析与建模流程

1. 一个想法: 研究假设
1. 识别策略 &rarr; 模型设定
1. 变量界定、数据收集和清理
1. 描述性统计分析
1. 统计和回归分析
1. 支持 $\rightarrow$ (7) &emsp; | &emsp; 不支持 $\rightarrow$ (1)-(5)
1. 解释结果、结论

--- - --

## 视角

- 解释和检验现有理论
  - 信贷需求弹性 (降息 &rarr; 按揭申请；个人养老金需求)
- 因果推断 / 政策评价
  - 绿色信贷 / 房地产政策 / 环保法
- 预测
  - 持续时间 (生存分析)：延期还款天数；延迟回复天数；提前还贷周数
  - 风险 / 波动 / 传导

> **核心问题**：识别 (内生性，排他性) / 经济含义


--- - --
## 可行性分析

- 给别人讲故事
- 写提纲：What？Why？How？ 
  - 问题是什么？能否清晰界定 $Y$，$D$ 和 $X$
  - 为什么重要？现实 / 文献 (要适当查一下文献)
  - 怎么做？
- 探索性分析：先做一些描述性统计分析，OLS
- 重复 2-3 论
- 开始做 (限定时间)

--- - --

## 读文献

- 谷歌学术：向前 (**被引**)，向后 ( ？) | AI 工具
- [连享会：论文重现网站大全](https://www.lianxh.cn/news/e87e5976686d5.html)
- 找代码：[replication.uni](https://replication.uni-goettingen.de/wiki/index.php?search=Stata+R&title=Special%3ASearch&go=Go)
  - 多集中于 AER，RES, JPE 等 Top 期刊。 
- 顺藤摸瓜：期刊文献 &rarr; 作者主页 &rarr; codes | github
  - Chernozhukov, V., D. Chetverikov, M. Demirer, E. Duflo, C. Hansen, W. Newey,J. Robins, **2018**, Double/debiased machine learning for treatment and structural parameters, **The Econometrics Journal**, 21 (1): C1-C68. [Link](https://doi.org/10.1111/ectj.12097), [PDF](https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/YG_ML/Chernozhukov_2018_Double_debiased_machine_learning_for_treatment_and_structural_parameters.pdf), [Rep](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/ectj/21/1/10.1111_ectj.12097/7/ectj12097-sup-0001-replicationfiles.zip?Expires=1671463190&Signature=ieIoCMUxv69iOGQx5hNm--i3XOlKp2qj80iTmaMITyYK6oQ822Z~rAxHCwxWc0PmNTTBx5k7TqYqCFFj52VZpfNp7n4LRDFK7Wknz6LqcQJ9VoQju~O77CjALt52p42L70P7RdA2SJfqj0IqFqjvP950Bu0zj0jYt7u0tJLO~3znZPbHxZPSK1MVtD3m-heshTx1NJgUvqX7gMC9BlSBt~OvHZ2ERnUlCvIETEKeBo5OnsXjwkXztIuFcofAIpC4-CjjM2Ynsqg0CGf6mnFCeB3OtYcamzwzV-AbUWOSuO74CBaofBNxP~3oNkuxYb5okskAjQOfJjtY5v5q1rwbRQ__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA), [cite](https://scholar.google.com/scholar?cites=17289873169606420768&as_sdt=2005&sciodt=0,5&hl=zh-CN)
  - 双重机器学习 ([DDML](https://academic.oup.com/ectj/article/21/1/C1/5056401)) &rarr; [Christian Hansen](https://voices.uchicago.edu/christianhansen/) 
    - [Esther Duflo](https://economics.mit.edu/people/faculty/esther-duflo) &rarr; [Working Paper](https://economics.mit.edu/people/faculty/esther-duflo/working-papers)
    - [Victor Chernozhukov](https://www.victorchernozhukov.com/) &rarr; [Code and Notebooks](https://www.victorchernozhukov.com/code-and-notebooks)
  - [Double machine learning literature and codes](https://docs.doubleml.org/stable/literature/literature.html)


--- - --

![DDML Flowchart](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20230915151319.png)

> Source: [Double machine learning literature and codes](https://docs.doubleml.org/stable/literature/literature.html) &rarr; [DoubleML Workflow](https://docs.doubleml.org/stable/workflow/workflow.html#workflow)


--- - --

## 读文献

- 闲逛 + 泛读
- 精读：基本概念，分析框架，重要假设，可能的局限 (方法、数据、现实背景)
- 复现：基本表格务必完全重现，否则：检查代码，检查原始数据，描述性统计分析
- 复述 + 质疑 + 讨论
  - e.g. Marginal q, 股权质押, TFP 

> Q：如何确定「重要文献」？

- 重要期刊：
  - Eco: AER, QJE, RES, JPE
  - Fin: JFE, JF, RFS, JFQA, Review of Finance
  - Econometrics: JoE, Econometrica, JAE
  - 中文：经济研究，管理世界、经济学季刊，金融研究，统计研究，会计研究，管理科学学报




--- - --
## 读文献 + 记笔记

- 片段 &rarr; 段落 &rarr; 小文献综述 
- 调整顺序和结构
- 笔记软件: 
  - [**Markdown**](https://www.lianxh.cn/search.html?s=Markdown): [VScode](https://code.visualstudio.com/) + [Typora](https://typora.io/) (输出 PDF)
  - [Marp](https://www.lianxh.cn/search.html?s=marp)：快速制作幻灯片
- 传统文献管理软件：Google 学术, **EndNote**, CiteSpace, Zotero 等
  - 连玉君, 2024, [getiref：快速获得文献的引文和PDF原文](https://www.lianxh.cn/details/1382.html)
- AI + 文献检索 + 梳理 
  - [Semantic Scholar](https://www.semanticscholar.org/search?q=machine%20learning%20double%20debiased&sort=pub-date): A free, AI-powered research tool for scientific literature
  - [Selected AI-Based Literature Review Tools]()：
    - [OpenRead](https://www.openread.academy/)&emsp;|&emsp;[Litmaps](https://app.litmaps.com/map/21311ba8-d87b-4319-815c-0804c57054c1/explore)
  - [The Best 10 AI For Literature Review In 2024](https://myjotbot.com/blog/ai-for-literature-review)


--- - --
<!-- backgroundColor: #C1CDCD -->
# 数据


### 巧妇难为无米之炊

--- - --
<!-- backgroundColor: white -->
## 数据：分类 1

* 结构化数据
  - 连续变量：财务指标、股价信息、薪酬、持股比例等
  - 类别变量：性别、地域、行业归属、所有权性质
  - 序别变量：满意度、信用评级
* 非结构化数据
  - 文本：公司公告、问询函、判决文书、媒体报道、微博、FaceBook
  - 视频：人流密度、表情、情绪 ……
  - 音频：方言、逻辑、谎言、沟通时长、语调 

--- - --

## 数据：分类 2
- 纬度划分
  - 截面数据
  - 时间序列：低频、高频
  - 追踪资料 (面板数据，eg. 借贷记录，股指，购物记录)
  - 网络数据 (eg. 银企关系)


--- - --


## 获取数据

### 中大图书馆

> [中大图书馆-统计类数据库](https://library.sysu.edu.cn/page/3640?title=&eresource_sel2_ref%5B0%5D=133)

- CSMAR (国泰安数据库-公司金融-股票-债券): 
  - &#x1F34E; <https://data.csmar.com/>
- EPS数据平台
- [Wind资讯金融终端](https://library.sysu.edu.cn/eresource/364)
- [中经网产业数据](https://cyk.cei.cn/jsps/Default)
  - 国内宏观层面的数据基本上都能够找到。Excel &rarr; Python/Stata
  - [例：宏观数据](https://cyk.cei.cn/jsps/Banner?p=7a577a323842682b577237412b6b4b6e44416930556f3875357a4579464a6e56304d3752445359423745784b705547722f6b3563322b2f56755a614d36714d2b516f47584d79446175395874327970706241524e4730375662586264683577343752714c647562354133735832383158516f4434576154556164693332666f2b6b7677454f4759514c4c42584e4f6f4b553473757251533471354969715238653457567a6c354b42732f393076753773376b61305635694d544e3279426e4e6375534447497942782f7a4f4875416e5952647a346a6f685444457269776231344b486c584e4e6339535072554a3745526543316f4e6c4f766331624a65455650674e395a484c344d3142636f542f4f44724d6265564e696e5a413136684b62766959585a6b49505431646e52577938413267544151482f73713647576456667843373452747166563664566a7671664e707874616e37595855486255374765454241723045564c436274773d)
- [中经网统计数据库](https://library.sysu.edu.cn/eresource/771)
- [EMIS—Emerging Markets Information Service（新兴市场动态及商务信息数据库）](https://library.sysu.edu.cn/eresource/769)
  - 新闻，股指，最新统计数据等
  - [China - Financial markest](https://www.emis.cn/v2/countries/profile/CN/financial-markets/)

--- - --

### RESSET系列数据库

- [RESSET系列数据库](https://library.sysu.edu.cn/eresource/1540) | [RESSET企业大数据平台](https://library.sysu.edu.cn/eresource/1541)
  - 需要输入账号和密码
  - 1、中山大学校园网IP范围内，直接点击访问。
  - 2、官方网站访问： http://www.resset.cn，点击页面“快速登录”右边的“企业大数据平台”链接后输入对应的用户名及密码进行登录。用户名：sysu和密码：sysu1903。
  - 3、校外不限IP访问，通过CARSI平台访问登陆，访问地址：http://db.resset.com/，点击页面的：CARIS 平台登陆，选择学校，然后输入验证身份信息后登陆使用。

### 全球数据

- 连小白, 2025, [GMD：最新全球宏观数据库-243个国家46个宏观变量](https://www.lianxh.cn/details/1559.html), 连享会 No.1559.
  - <https://www.globalmacrodata.com/data.html>

--- - --

### 到哪里找数据？

> Source: 黄湘云, [R 语言数据分析实战-介绍](https://bookdown.org/xiangyun/data-analysis-in-action/preface.html) 

- [数据获取概述](https://bookdown.org/xiangyun/data-analysis-in-action/wrangling-collection.html)，写的不错

- 各国、各级政府的统计局，比如[美国人口调查局](https://www.census.gov/data.html)、[中国国家统计局](http://www.stats.gov.cn/)等。
- 国际、国内各类组织机构，比如[世界银行](https://www.shihang.org/zh/home)、[美国疾病预防控制中心](https://www.cdc.gov/)等。
- 各类网站提供的数据集，比如 GitHub 开放数据集列表 [awesome-public-datasets](https://github.com/awesomedata/awesome-public-datasets)，[kaggle](https://www.kaggle.com/datasets) 网站提供大量数据分析竞赛及相应的数据集。
- R 包内置数据集，已整理得很好，比如 [**spData**](https://github.com/Nowosad/spData/) 包 收集整理了很多空间统计方面的数据集。[Rdatasets](https://github.com/vincentarelbundock/Rdatasets) 更是收集约 1900 个数据集，全部来自 CRAN 上发布的 R 包。




--- - --
<!-- backgroundColor: #C1CDCD -->
## 计量模型的设定思路

<br>

> 参数方法：$y = f(x, \beta) + \varepsilon$ 

- $y$ ？
- $x$ ？
- $f(\cdot)$ ?
- $\varepsilon$ ？

> 非参数方法: $y = g(x)$ 

> 半参数方法：$y = f(D;\theta) + g(x)$ 


--- - --
<!-- backgroundColor: #FFFFF9 -->
## 计量模型的设定思路：${\color{red}{y}}$

$y = f(x, \beta) + \varepsilon$ 

- $\small y$：outcome variable (我们关注什么？)
  - $\small y = 0/1$：是否违约；是否发债；是否提前还款 ……
  - $\small y = 连续变量$：DD (Disntance to Default)；ROE ……
  - $\small y = K$ 一年内借贷次数；收到问询函的次数；违规处罚次数；专利诉讼次数
  - $\small y = Duration$：延期还款天数；延迟回复天数；提前还贷周数

--- - --
## 计量模型的设定思路：${\color{green}{x}}$
$y = f(x, \beta) + \varepsilon$ 

- $\small x = Income$
  
- $\small x = Size, ROE, OCF, Leverage, StockPledge, \cdots$
- $\small x = i.SOE, i.Industry$ (虚拟变量、类别变量)
- $\small x = D_1, D_2, \cdots, D_{10000}$ (高维数据，大数据)
- $\small x =$ 文本：Text1, Text2, PDF1, PDF2, ……
- $\small x =$ 图形；录音；影像


--- - --
## 计量模型的设定思路：$\small{\color{red}{f(\cdot)}}$ —— 模型设定形式

![w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209091907.png)


--- - --

### 核心思想

- 从 $y$ 的分布特征入手
  
- 确定分析的重点：均值，中位数，还是尾部、波动率、取值区间？

- 设定 $y = f(x, \beta)$ 的函数形式
  - 变量筛选
  - 模型筛选
- 统计推断：**Population** &rarr; **Sample**
  - 估计参数 $\small \beta$ &rarr; 假设检验
- 应用：解释 / 因果推断 / 预测 / 可视化

--- - --

Mroz, T. A., **1987**, The sensitivity of an empirical model of married women's hours of work to economic and statistical assumptions, **Econometrica**, 55 (4): 765-799. [-Link-](https://doi.org/10.2307/1911029), [-PDF-](https://sci-hub.ren/10.2307/1911029), [PDF2](https://juanmuro.web.uah.es/mroz87.pdf)

![w:850](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%9B%BE%E7%89%872_20191213104808.png)



--- - --

![bg left:45% w:850](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/gr_OLS_CEF_edu_01a.png)


>条件期望 CEF
$$\small
\mathbb{E}[Y| X=x]=m(x)
$$

>建模思路：考虑误差

$$\small
\begin{aligned}
Y &=m(X)+e \\
\mathbb{E}[e| X] &=0 \\
\mathbb{E}\left[e^{2}|X\right] &=\sigma^{2}(X)
\end{aligned}
$$

>实证模型
$$\small
\mathbb{E}[Wage\,|\,Edu]= m(Edu)
$$


--- - --

![bg left:40% w:690](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/gr_OLS_CEF_edu_01a.png)



>实证模型
$$\small
\mathbb{E}[Wage\,|\,Edu]= m(Edu)
$$

>模型设定：

$\small
(1)\ \  Wage_i = \alpha + \beta Edu_i + e_i
$
$\small
(2)\ \ Wage_i = \alpha + \beta_1 Edu_i + \beta_2 Edu_i^2 + e_i
$
$\small
(3)\ \ \text{ln}(Wage_i) = \alpha + \beta Edu_i + e_i
$

<br>

> **Q:** 其他扩展 ？
- 分位数回归
- 区间估计

--- - --

### CEF：非参数估计

<br>

$$
\mathbb{E}[Y \mid X=x]=m(x)
$$

$$
\begin{aligned}
Y &=m(X)+e \\
\mathbb{E}[e \mid X] &=0 \\
\mathbb{E}\left[e^{2} \mid X\right] &=\sigma^{2}(X)
\end{aligned}
$$

![bg left:55% w:650](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig-NP-binned-mean-01.png)

--- - --
<!-- backgroundColor: #C1CDCD -->
## 线性回归

--- - --
<!-- backgroundColor: white -->
### 线性回归：基本思想

<br>

<!-- ![w:700](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209125618.png) -->

![w:600](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221230115142.png)


<font color=black size=4>

> **Stata dofile**: [点击查看](https://gitee.com/arlionn/PX/wikis/SlidesDofiles/A4_OLS_R1_reg_Fig2_v2.md) 



--- - --

### 线性模型：假设条件
> $y_{i}=x_{i}^{\prime} \beta+e_{i}, \quad i=1, \ldots, n$ 
&emsp; &emsp; $x_{i}$ 和 $\beta$ 均为 $k \times 1$ 维；&emsp; 参数个数为： $K=k+1$ &ensp;$\left(\beta\right.$ and $\left.\sigma^{2}\right)$

  - **A1： 参数线性假设。**
  
    - $y = a+ x\beta_1 + z\beta_2 + ({\color{red}{x\times z}})\theta + u$
    - $y = a+ x\beta_1 + {\color{red}{z^{\beta_2}}} + u$ &emsp; NLS：[**[R]** `nl`](https://www.stata.com/manuals/rnl.pdf) 
  - **A2： 随机抽样假设。**
    - 否则，便会存在自选择 ([`etregress`](https://www.stata.com/manuals/teetregress.pdf)) 或样本选择偏误 ([`heckman`](https://www.stata.com/manuals/rheckman.pdf))  
  - **A3：外生性假设。** $\small \mathbb{E}\left(e_{i} \mid x_{i}\right)=0 \ \Longrightarrow \ \mathbb{E}\left(e_{i}\right)=0$ 
  - **A4：同方差假设。** $\mathbb{E}\left(e_{i}^{2}\right)=\sigma^{2}$




--- - --

### 线性回归：估计
- $\small \widehat{\boldsymbol{\beta}}=\left(\boldsymbol{X}^{\prime} \boldsymbol{X}\right)^{-1}\left(\boldsymbol{X}^{\prime} \boldsymbol{y}\right)$ 是 LS 的系数估计值
- $\widehat{e}_{i}=y_{i}-\boldsymbol{x}_{i}^{\prime} \widehat{\boldsymbol{\beta}}$ 为 LS 的残差
  
- $\small RSS = \sum_{i=1}^{n} \widehat{e}_{i}^{2}$ 为残差平方和
- $\small \widehat{\sigma}^{2}= RSS/n$ 为方差估计量


--- - --

<!-- backgroundColor: #C1CDCD -->

## 系数的标准误 (A)：

### 传统推断方法

<br>


- 参考 [When and How to use Cluster SE](https://www.econstor.eu/bitstream/10419/230574/1/1693593181.pdf) 里面有很多实操建议
- 参考 [Stewart-2016](https://scholar.princeton.edu/sites/default/files/bstewart/files/lecture9handout.pdf)
- OLS 的五大假设
- 系数标准误的推导过程



--- - --
<!-- backgroundColor: white -->
### Example: $\operatorname{Var}\left(u_{i} \mid \mathbf{X}\right)=\sigma^{2}$ Homoskedasticity

![w:750](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_error_homo_01.png)

--- - --
<!-- backgroundColor: white -->
### Example: $\small\operatorname{Var}\left(u_{i} \mid \mathbf{X}\right)=\sigma_{{\color{red}{i}}}^{2}$ Heteroskedasticity
![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_error_het_01.png)

--- - --
<!-- backgroundColor: white -->
### Example: $\small\operatorname{Var}\left(u_{i} \mid \mathbf{X}\right)=\sigma_{{\color{red}{i}}}^{2}$ Heteroskedasticity
![w:700](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221230100410.png)

--- - --
<!-- backgroundColor: #FFFFF9 -->

## Non-constant Error Variance
$
\small
\text{{\color{red}{Homo}}skedastic:} \quad V[\mathbf{u} \mid \mathbf{X}]=\left[\begin{array}{ccccc}
\sigma^{2} & 0 & 0 & \ldots & 0 \\
0 & \sigma^{2} & 0 & \ldots & 0 \\
& & & \vdots & \\
0 & 0 & 0 & \ldots & \sigma^{2}
\end{array}\right] =\sigma^{2} \mathbf{I}
$

$
\small
\text{{\color{red}{Het}}eroskedastic:} \hspace{6pt} V[\mathbf{u} \mid \mathbf{X}]=\left[\begin{array}{ccccc}
\sigma_{1}^{2} & 0 & 0 & \ldots & 0 \\
0 & \sigma_{2}^{2} & 0 & \ldots & 0 \\
& & & \vdots & \\
0 & 0 & 0 & \ldots & \sigma_{n}^{2}
\end{array}\right] = \boldsymbol{\Sigma} = \sigma^2\boldsymbol{\Omega}
$

- 独立，但分布有差异 (Independent, not identical)
- $\small\operatorname{Cov}\left(u_{i}, u_{j} \mid \mathbf{X}\right)=0$, 
- $\small\operatorname{Var}\left(u_{i} \mid \mathbf{X}\right)=\sigma_{i}^{2}$


--- - --
<!-- backgroundColor: #FFFFF9 -->
## 同方差假设下的标准误



> Source - [Stewart-2016](https://scholar.princeton.edu/sites/default/files/bstewart/files/lecture9handout.pdf)
 


- Remember:  $\small\widehat{\boldsymbol{\beta}}=\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} \mathbf{X}^{\prime} \mathbf{y}$, and let $\small\operatorname{Var}[\mathbf{u} \mid \mathbf{X}]=\boldsymbol{\Sigma}$
- Using assumptions 1 and 4, we can show that we have the following (derivation in the appendix): 
$$
\small
\operatorname{Var}[\hat{\boldsymbol{\beta}} \mid \mathbf{X}]=\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} \mathbf{X}^{\prime} {\color{blue}{\boldsymbol{\Sigma}}} \mathbf{X}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}
$$
- With homoskedasticity, $\boldsymbol{\Sigma}=\sigma^{2} \mathbf{I}$
$$
\small
\begin{aligned}
\operatorname{Var}[\hat{\boldsymbol{\beta}} \mid \mathbf{X}] &=\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} \mathbf{X}^{\prime} {\color{blue}{\boldsymbol{\Sigma}}} \mathbf{X}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} \\
&=\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} \mathbf{X}^{\prime} {\color{blue}{\boldsymbol{\sigma^{2} \mathbf{I}}}} \left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} \text { (by homoskedasticity) } \\
&={\color{blue}{\boldsymbol{\sigma^{2}}}}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1} {\color{blue}{\mathbf{X}^{\prime} \mathbf{X}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}}} \\
&=\sigma^{2}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}
\end{aligned}
$$
- Replace $\sigma^{2}$ with estimate $\widehat{\sigma}^{2}$ will give us our estimate of the covariance matrix

--- - --

- **OLS** 的系数估计值为：$\small\widehat{\boldsymbol{\beta}}=\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}\mathbf{X}^{\prime}\mathbf{y}$
- 方差为：$\small\operatorname{Var}\,[\hat{\boldsymbol{\beta}} \mid \mathbf{X}] = \sigma^{2}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}$
  
这意味着，在 $\sigma^2$ 相同的情况下，$\small\operatorname{Var}(\mathbf{X})=\left(\mathbf{X}^{\prime} \mathbf{X}\right)$ 越大，$\small\operatorname{Var}\,[\hat{\boldsymbol{\beta}} \mid \mathbf{X}]$ 越小，即系数的估计越准确。我们可以通过下图直观地呈现上述特征：

<!---![h:400](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20220527230908.png) --->

![w:600](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_se_beta_03.png)

--- - --
### 小结
- **OLS** 的系数估计值为：$\small\widehat{\boldsymbol{\beta}}=\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}\mathbf{X}^{\prime}\mathbf{y}$
- 方差为：$\small\operatorname{Var}\,[\hat{\boldsymbol{\beta}} \mid \mathbf{X}] = \sigma^{2}\left(\mathbf{X}^{\prime} \mathbf{X}\right)^{-1}$

--- - --

> 在线模拟 OLS 的性质  &#x1F449;  [点击尝试](https://econometricsbysimulation.shinyapps.io/OLS-App/)

- 详情参阅：- [Stata：系数为何不显著？GIF-演示-OLS-的性质](https://www.lianxh.cn/news/d4fd7a262be49.html)


--- - --




[APP](https://econometricsbysimulation.shinyapps.io/OLS-App/)

[详情](https://www.lianxh.cn/news/d4fd7a262be49.html)



![bg left:80% h:650](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/7692714-b2b924c437a2dda6.gif)



--- - --
<!-- backgroundColor: #C1CDCD -->

## 系数的标准误 (B)：

### 基于再抽样的推断方法

- Jackknife 
- Bootstrap
--- - --
<!-- backgroundColor: #FFFFF9 -->
### 系数的标准误: 基本思想

> Source: [Stewart - Princeton, P.23](https://scholar.princeton.edu/sites/default/files/bstewart/files/lecture5_handout2020.pdf)

- OLS 是一个估计量：我们随机抽取样本 &rarr; 获得参数估计
- 这个过程与计算样本的均值、标准差等统计量的过程并无本质差别
- 因此，$\small \widehat{\beta}$ 具有其抽样分布特征 &rarr; sampling variance/standard error, etc.

<br>

  ![w:800](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/OLS_Smapling-distribution-beta_01.png)


--- - --
<!-- backgroundColor: #e6e6fa -->

### 各种方法：如何计算/获取系数估计值的标准误？

* **M1**: 随机抽样 
* **M2**: 精确推断：依赖于特定的分布假设，如 $\varepsilon \sim N(\cdot)$
  - Homo: $\quad \varepsilon_i \sim N(0, \sigma^2)$
    - `. reg y x`
  - Het &rarr; White (1980) $\quad \varepsilon_i \sim N(0, \sigma_i^2)$ 
    - `. reg y x, robust`
  - Clustered adj SE: $\quad \varepsilon_i \sim N(0, \sigma_j^2), j=1,2\cdots J,\ Corr(\varepsilon_{ji},\varepsilon_{js}) \neq 0$
    - `. reg y x, vce(cluster industry)` 
* **M3**: 再抽样 (re-sampling)
  - Jackknife (去一法, Leave one out, LOO) &rarr; `reg y x, vce(jackknife)`
  - Bootstrap (自举法/自抽样，BS) &rarr; `reg y x, vce(bs, reps(500))`

--- - --
<!-- backgroundColor: #FFFFF9 -->
### DGP
$y_i= 1 + 2x_i + u$
$x\sim N(0,0.2^2),\  u\sim N(0,1)$

```stata
set scheme white_tableau 
*-DGP
clear 
set seed 13579
set obs 50
gen u = rnormal(0,2)
gen x = rnormal(0,0.2)
gen y = 1 + 2*x + u 
save "$D/simdata_ols.dta", replace 
```

> **Goal:** 用这份模拟数据来分析 M1-M3 各类方法下产生的标准误有何差异

--- - --

### **M1**: 随机抽样 
$\small y_i= 1 + 2x_i + u$
$\small x\sim N(0,0.2^2),\  u\sim N(0,1)$

![bg left:42% w:560](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS__smaple_SE_01.png)

```stata
*-OLS 系数标准误：随机抽样
use "$D/simdata_ols.dta", clear 
tw scatter y x 
forvalues j=1/30{
  preserve 
    sample 70 // 随机抽取 #% 的观察值
    addplot: lfit y x, ///
             lc(gray%30) legend(off)
  restore 
}
addplot: lfit y x, lw(*2) lc(orange)
```
--- - --

### **M1**: 随机抽样：如何计算 $se(\widehat{\beta})$ ?
1. Sampling: $\small s_1$ &rarr; $\small \widehat{\beta}_1^{s}$; $\small s_2$ &rarr; $\small\widehat{\beta}_2^{s}$ ...
2. $\small\widehat{\beta}_k^{s} \in \{\widehat{\beta}_1^{s}, \widehat{\beta}_2^{s}, \cdots, \widehat{\beta}_K^{s}\}$
3. $\small se(\widehat{\beta}) = s.d(\widehat{\beta}_k^{s})$ 

![bg left:42% w:560](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS__smaple_SE_01.png)

```stata
use "$D/simdata_ols.dta", clear 
gen bk = .  // 用于存储系数估计值
forvalues j=1/30{
  preserve 
    qui sample 70 // 随机抽取 #% 的观察值
    qui reg y x 
  restore 
  qui replace bk = _b[x] in `j'
}

. sum bk 
  Variable |  Obs        Mean    Std. dev.       Min        Max
-----------+---------------------------------------------------
        bk |   30    3.847519    .9627126   2.297643   7.328576

. reg y x , noheader
----------------------------------------------------------------
 y | Coefficient  Std. err.    t    P>|t|   [95% conf. interval]
---+------------------------------------------------------------
 x |      3.812      1.376   2.77   0.008      1.047       6.578
----------------------------------------------------------------
```

--- - --

### **M2**: 精确推断

<br>
<br>

![bg left w:660](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_SE_normal_01.png)



```stata
use "$D/simdata_ols.dta", clear 

tw scatter y x || lfitci y x
```

--- - --

### **M3**: 二次抽样 (a) - Jackknife 

![bg left w:660](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_SE_jk_01.png)

```stata
use "$D/simdata_ols.dta", clear 

tw scatter y x 
local N = _N

forvalues j=1/`N'{
  preserve 
    drop in `j' //每次扔掉一个观察值
    addplot: lfit y x, ///
             lc(gray%30) legend(off)
  restore 
}
addplot: lfit y x, lw(*2) lc(orange)
```

--- - --

### **M3b**: 二次抽样 (b) - Bootstrap

![bg left w:660](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_SE_bs_01.png)

```stata
use "$D/simdata_ols.dta", clear 

tw scatter y x 
local N = _N
forvalues j=1/50{  // BS 50 次
  preserve 
    bsample // Bootstrap sampling
    addplot: lfit y x, ///
             lc(gray%30) legend(off)
  restore 
}
addplot: lfit   y x, lw(*2) lc(orange)
addplot: lfitci y x, fcolor(yellow%20) nofit
```
- Note: 黄色阴影是基于精确推断 (Normal) 得到的 $95\%$ 置信区间



--- - --
<!-- backgroundColor: #C1CDCD -->

## 模型评估 (Model Evaluation)

- $R^{2}$, $\bar{R}^{2}$
- $MSPE$
- $F$ 统计量

--- - --
<!-- backgroundColor: #FFFFF9 -->


![bg left:35% w:400](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_R2_03.png)

## Coefficient of determination, $R^{2}$

> $\small y_{i}-\bar{y}=\underbrace{\left(\hat{y}_{i}-\bar{y}\right)}_{\text {模型解释部分}}+\underbrace{\left(y_{i}-\hat{y}_{i}\right)}_{\text {模型无法解释部分}}$

> 残差 (Residuals): $\small \hat{e}_i = y_{i}-\hat{y}_{i}$

> $\small \underbrace{\sum_{i}\left(y_{i}-\bar{y}\right)^{2}}_{\mathrm{SS}_{\text {total }}}=\underbrace{\sum_{i}\left(\hat{y}_{i}-\bar{y}\right)^{2}}_{\mathrm{SS}_{\text {model }}}+\underbrace{\sum_{i}\left(y_{i}-\hat{y}_{i}\right)^{2}}_{\mathrm{SS}_{\text {error }}},$

<br>

$\small 
R^{2}=\frac{MSS}{TSS}=1-\frac{ESS}{TSS}
$

[Source](https://www.mit.edu/~6.s085/notes/lecture3.pdf)

--- - --

$\mathbf{Y} = \mathbf{X}\hat{\boldsymbol{\beta}} + \hat{\mathbf{\varepsilon}}$ $\quad \to \quad \operatorname{Var}(\mathbf{Y})=\operatorname{Var}(\mathbf{X}\hat{\boldsymbol{\beta}}) + \operatorname{Var}(\hat{\mathbf{\varepsilon}})$  

The larger the better $\small \left(0 \leq R^{2} \leq 1\right)$.



> Note: $\small R^{2}$ is not a statistical test and it is not meant to be tested against some hypothesis. It is just an index and can be used to compare both nested and non-nested models.

<!-- --- - --

## Regression metrics
Most commonly used are
- **MSE:** mean squared error: 
   $$\frac{\sum_{i}\left(y_{i} - \widehat{y}_i\right)^{2}}{n}$$
- **RMSE:** root mean squared error (RMSE) often used as well
- **MAE:** mean absolute error: 
  $$\frac{\sum_{i}\left|y_{i} - \widehat{y}_i\right|}{n}$$
  - Less sensitive to outliers and large errors

[](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20220527155211.png) -->

--- - --
<!-- backgroundColor: #FFFFF9 -->
## 模型评估的难题
### 权衡：预测偏差 v.s 预测方差


--- - --
<!-- backgroundColor: white -->

<center>

![w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/function_addline_06a.png)


--- - --

### 预测「偏差-方差」的权衡
**均方误差** (mean-square error, MSE)：
$$
\operatorname{MSE}(\hat{\theta})==\mathrm{E}\left(\hat{\theta}-\theta_{0}\right)^{2}
$$
- 待估参数为 $\theta$, 其真实值为 $\theta_{0}$, 估计值为 $\hat{\theta}$, 

估计量的 **方差**：
$$
\operatorname{Var}(\hat{\theta})=\mathrm{E}[\hat{\theta}-\mathrm{E}(\hat{\theta})]^{2}
$$
估计量的 **偏差**：
$$
\operatorname{Bias}(\hat{\theta})=\mathrm{E}(\hat{\theta})-\theta_{0}
$$
权衡关系：
$$
\operatorname{MSE}(\hat{\theta})=\operatorname{Bias}(\hat{\theta})^{2}+\operatorname{Var}(\hat{\theta})
$$
--- - --
### 预测「偏差-方差」的权衡

<br>
 
<center>

![w:700](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig-Lasso-Bias-variance-tradeoff-02.png)



--- - --

<center>

![w:700](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20220727001122.png)


--- - --
## 模型的评估：AIC 和 BIC

<br>

当模型的干扰项服从独立正态分布时，$\small\mathrm{AIC}$ 和 $\small\mathrm{AIC}$ 可表示为：

$$\small
\begin{aligned}
&\mathrm{AIC}=n \ln (R S S / n)+2 k \\
&\mathrm{BIC}=n \ln (R S S / n)+k \ln (n)
\end{aligned}
$$

其中，$n$ 为观察值个数，$\small RSS$ 为残差平方和。

也可以用 $\small\mathrm{MSE} = \hat{\sigma}^2$ 替代上式中的 $\small R S S / n$，因为 $\small \hat{\sigma}^2 = RSS/n$。

--- - --


## AIC 和 BIC ： MLE 估计

Akaike's (1974) AIC 和 Schwarz's (1978) BIC 都用于评估模型拟合程度 ([**[R]** estat ic](https://www.stata.com/manuals/restatic.pdf))：
$$\small
\begin{aligned}
&\mathrm{AIC}=-2 \ln L + {\color{blue}{2}} \cdot k \\
&\mathrm{BIC}=-2 \ln L + {\color{blue}{\ln (n)}\cdot k }
\end{aligned}
$$
其中，$k$ 是模型中的参数个数， $\small\ln (L)$ 是对数似然函数。

- $\small f(y, \theta)$ is a parametric density with a $\small K \times 1$ parameter $\small \boldsymbol{\theta}$
  - e.g. &emsp;  $\small y_i \sim N(x_i'\beta,\sigma^2)$，$\small \boldsymbol{\theta}=(\beta, \sigma)$
  - $$\small f(y_i;\beta,\sigma^2) = \phi(x_i'\beta,\sigma)=\frac{1}{\sqrt{2\pi \sigma^2}}\exp\left(-\frac{(y_i-x_i'\beta)^2}{2\sigma^2}\right)$$
- 似然函数 (likelihood) 定义为：$\small L(\boldsymbol{\theta})=f(\boldsymbol{y}, \boldsymbol{\theta})=\prod_{i=1}^{n} f\left(y_{i}, \boldsymbol{\theta}\right)$
- 通过求解极大化目标函数 $\small \ln L(\boldsymbol{\theta})$ 可以估计出 $\small \widehat{\boldsymbol{\theta}}$ 

--- - --
# 典型模型


--- - --
## 时间序列模型 (1)：ARMA

- AR：Auto-regression
  - $y_t=\rho y_{t-1} + u_t$
- MA：Moving Average
  - $y_t=\theta_1 u_{t-1} + \theta_2 u_t$
- ARMA：AR+MA
  - $y_t=\rho y_{t-1} + \theta_1 u_{t-1} + \theta_2 u_t$

--- - --

### 例子：我的体重 

$
(1) \quad y_{t} = \rho y_{t-1} + \varepsilon_{t}  
$

$
(2) \quad y_{t-1} = \rho y_{t-2} + \varepsilon_{t-1}
$

将  (2) 带入 (1):

$
(3) \quad y_{t} = \rho^{2} y_{t-2} + \rho\varepsilon_{t-1} + \varepsilon_{t}
$

$\cdots$

$
(4) \quad y_{t} = \rho^{40} y_{t-40} + \rho^{39}\varepsilon_{it-39} +  \cdots + \rho\varepsilon_{it-1} +\varepsilon_{t}
$

- **Q1：** $\text{Corr}(y_{it},y_{it-2})=0\ ?$, $\text{Corr}(y_{it},y_{it-4})=0\ ?$ 
- **Q2：** $\color{red}{\rho}$ 的含义是什么？
- **Q3：** 如何做预测？


--- - --
## 时间序列模型 (2)：GARCH

> 条件波动  
   
> 丛聚特征

--- - --
#### 万科 (000002) 日回报率时序特征
![Wanke_ret_1990-2022 w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Wanke_ret_1990-2022.png)

--- - --
![Wanke_ret_2012-2022 w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Wanke_ret_2012-2022.png)

--- - --
## 时间序列模型 (2)：GARCH
对于多数金融时间序列而言, 其条件方差 (波动) 往往是随时间改变的。我们可以采用如下 $\operatorname{AR}(p)$ 过程来描述这种特征:

$\qquad y_t=\rho y_{t-1}+u_t$

$\qquad u_t^2=\alpha_0+\alpha_1 u_{t-1}^2+\alpha_2 u_{t-2}^2+\cdots+\alpha_p u_{t-p}^2+v_t$
--- - --
## 时间序列模型 (2)：GARCH(p,q)
$$
\begin{aligned}
& y_t=\beta_0+\sum_{j=1}^k \beta_j x_{i t}+u_t \\
& u_t=v_t \sqrt{h_t} \quad v_t \sim \operatorname{IID} N(0,1) \\
& h_t=a_0+\sum_{j=1}^p a_j u_{t-j}^2
\end{aligned}
$$


--- - --
<!-- backgroundColor: #C1CDCD -->
## 面板数据 - 多维数据

--- - --
<!-- backgroundColor: #FFFFF9 -->
**Raw:** $\small\qquad\qquad\quad y_{it} = \alpha_i + x_{it}\beta + \varepsilon_{it}$ 
 <!--$D_i = 1\ \text{for firm}\ i$ and $0$ otherwise-->

**De-meaned:** $\small y_{it} -\bar{y}_i= (x_{it}-\bar{x}_i)\beta + (\varepsilon_{it}-\bar{\varepsilon}_i)$

![w:750](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Fig_OLS_FE_01.png)

--- - --
### 面板数据模型：设定和估计

考虑如下一维固定效应模型：
$$
y_{i t}=\alpha_i+\mathbf{x}_{i t}^{\prime} \boldsymbol{\beta}+\varepsilon_{i t}
$$
其组内均值为：
$$
\bar{y}_i=\alpha_i+\overline{\mathbf{x}}_i \boldsymbol{\beta}+\bar{\varepsilon}_i
$$
其中, $\bar{y}_i=\left(1 / T_i\right) \sum_{t=1}^{T_i} y_{i t}, T_i$ 表示第 $i$ 个个体的观察期数。 $\overline{\mathbf{x}}_i$ 和 $\bar{\varepsilon}_i$ 的定义方式与此相同。两式相减, 可去除个体效应 $\alpha_i$ :
$$
\left(y_{i t}-\bar{y}_i\right)=\left(\mathbf{x}_{i t}-\overline{\mathbf{x}}_i\right)^{\prime} \boldsymbol{\beta}+\left(\varepsilon_{i t}-\bar{\varepsilon}_i\right)
$$
若设定 $\dot{y}_{i t}=\left(y_{i t}-\bar{y}_i\right), \dot{\mathbf{x}}_{i t}$, 以及 $\dot{\varepsilon}_{i t}$ 则可用 OLS 估计如下模型得到 $\boldsymbol{\beta}$ 的估计值:
$$
\dot{y}_{i t}=\dot{\mathbf{x}}_{i t}^{\prime} \boldsymbol{\beta}+\dot{\varepsilon}_{i t}
$$


--- - --
<!-- backgroundColor: white -->
###  TWFE：二维固定效应模型
进一步加人一组时间虚拟变量以控制宏观经济因素的影响，该模型称为 TWFE:
$$
y_{i t}=\mathbf{x}_{i t}^{\prime} \boldsymbol{\beta}+a_i+\lambda_t+\varepsilon_{i t}
$$
可以采用组内去心的方式同时去除个体固定效应和时间效应。转换方式为： 
$$
\widetilde{y}_{i t}=y_{i t}-\bar{y}_i-\bar{y}_t
$$
其中, $\bar{y}_t=\left(1 / N_t\right) \sum_{i=1}^{N_t} y_{i t}, N_t$ 表示第 $t$ 个时点包含的公司数量。 $\bar{y}_i$ 的定 义同前。按此思路可以得到 $\widetilde{\mathbf{x}}_{i t}$, 进而用 $\widetilde{y}_{i t}$ 对 $\widetilde{\mathbf{x}}_{i t}$ 执行 OLS 回归即可得到无偏估计量, $\small \widehat{\boldsymbol{\beta}}_{T W F E}$

> Q：高维固定效应如何估计？

--- - --
<!-- backgroundColor: #C1CDCD -->
## 结构变化 

- 变截距
- 变斜率
- 非线性
- 结构变化未知
- 状态转换

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 结构变化 1：变截距、变斜率

![bg left:45% w:720](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/FWL_Dummy_a01.png)


```stata
 i     y     x   M    F   cons  
-------------------------------   
 1   5.7   1.6   0    1      1  
 2   6.4   1.4   0    1      1  
 3   9.3   2.0   1    0      1  
 4   9.0   1.4   1    0      1  
 5   9.3   1.7   1    0      1 
```
$\small y_{i} = \alpha_1 + {\color{blue}{\gamma}}\,M_{i} + \beta x_{i} + u_{i}$

$\small E[y_{i}\,|\,M=0] = \alpha_1 \quad\ \  +  \beta x_{i}$
$\small E[y_{i}\,|\,M=1] = \underbrace{\alpha_1 + {\color{blue}{\gamma}}}_{\alpha_2} + \beta x_{i}$

<br>

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 结构变化 2：变截距+变斜率

![w:620](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209134823.png)

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 结构变化 3：非线性
<br>

![bg left:45% w:550](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209133417.png)

$$
\begin{aligned}
& \mathrm{y}_i=\beta_0+\beta_1 x_i+\beta_2 x_i^2+\varepsilon_i \\
& T P=x_0=-0.5 \beta_1 / \beta_2 \\
& \frac{\partial y}{\partial x}=\beta_1+2 \beta_2 x \\
& y_{i t}=\beta_0+u_i+\lambda_t+\beta_1 x_{i t}+\beta_1 x_{i t}^2+\theta w_{i t}+\varepsilon_{i t}
\end{aligned}
$$

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 结构变化 4：变化点未知

<br>

![bg left:50% w:550](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209135018.png)

$$
\begin{aligned}
& y=a_1+x \beta_1+\varepsilon \\
& y=a_2+x \beta_2+\varepsilon \\
& y=a_3+x \beta_3+\varepsilon
\end{aligned}
$$

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_装饰黄线.png)

$$
\begin{aligned}
y_{i t}= & a_i+\beta_1 x_{i t} \cdot I\left(x_{i t} \leq \gamma_1\right) \\
& +\beta_2 x_{i t} \cdot I\left(\gamma_1<x i t<\gamma_2\right) \\
& +\beta_3 x_{i t} \cdot I\left(x_{i t} \geq \gamma_2\right) \\
& +\text {w} \theta+\varepsilon_{i t}
\end{aligned}
$$

- 面板门槛模型 ([-Link-](https://www.lianxh.cn/news/f77a4e5c6206f.html))
--- - --
<!-- backgroundColor: #C1CDCD -->
## 政策评价和因果推断

- DID：倍分法
- RDD：断点回归
- SCM：合成控制
- SCM-DID：合成 DID
- Bunching：聚束分析


--- - --
<!-- backgroundColor: #FFFFF9 -->

## DID 

![w:800](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221201234927.png)

--- - --
<!-- backgroundColor: #FFFFF9 -->
## DID 简介：反事实架构

- 政策效果：
  - $\small \tau=Y_1-Y_0$ ？
  
  - $\small \tau=Y_1-Y_1^N$ ？
  
![w:900 DID-two-period-00](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/DID-two-period-00.png)

--- - --

### 如何得到 $\small Y_{1}^N$ ? —— <font color=darkblue size=6>时间趋势视角

<br>

![bg left:45% w:500 DID-two-period-01](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/DID-two-period-01.png)

$$
\tau =Y_1-Y_{1}^{N}
$$

<br>

$$
\begin{aligned}
	Y_{1}^{N}&=Y_0+{\color{blue} Trend}\\
	&=Y_0+\left( {\color{blue} C_1-C_0} \right)\\
\end{aligned}
$$

<br>

$$
\tau =(Y_1-Y_0)-({\color{blue} C_1-C_0})
$$

--- - --

### 如何得到 $\small Y_{1}^N$ ? —— <font color=darkblue size=6>个体差异视角

<br>

![DID-two-period-02-potential](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/DID-two-period-02-potential.png)

--- - --

### 如何得到 $\small Y_{1}^N$ ? —— <font color=darkblue size=6>个体差异视角

![bg left:45% w:500 DID-two-period-02-FE](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/DID-two-period-02-FE.png)

<br>

$$
\tau =Y_1-Y_{1}^{N}
$$

<br>

$$
\begin{aligned}
	Y_{1}^{N}&=Y_0+{\color{green} FE}\\
	&=C_1+\left( {\color{green} Y_0-C_0} \right)\\
\end{aligned}
$$

<br>

$$
\tau =(Y_1-C_1)-({\color{green} Y_0-C_0})
$$


--- - --
<!-- backgroundColor: #FFFFF9 -->
### DID：倍分法 - 例 1



Card, D., A. B. Krueger, **1994**, Minimum wages and employment: A case study of the fast-food industry in new jersey and pennsylvania, **American Economic Review**, 84 (4): 772-793. [-PDF-](https://uh.edu/~adkugler/Card%26Krueger.pdf) 

![bg left:65% w:670](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20220706110428.png)


--- - --
<!-- backgroundColor: #FFFFF9 -->
### DID：倍分法 - 例 2
![20221209135616 w:800](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209135616.png)

> See: [Big Bad Banks：多期 DID 经典论文介绍](https://www.lianxh.cn/news/42611191cca93.html)

--- - --
<!-- backgroundColor: #FFFFF9 -->
### DID：倍分法 - 例 3
### 劳动力市场中的性别不平等

> Kleven, Henrik, Camille Landais, and Jakob Egholt Søgaard. 2019. "Children and Gender Inequality: Evidence from Denmark." *American Economic Journal: Applied Economics*, 11 (4): 181-209. [-Link-](https://www.aeaweb.org/articles?id=10.1257/app.20180010), [-PDF-](https://pubs.aeaweb.org/doi/pdfplus/10.1257/app.20180010),[-cited-](https://scholar.google.com/scholar?cites=167605246068571565&as_sdt=2005&sciodt=0,5&hl=en), [-Appendix-](https://www.aeaweb.org/content/file?id=10629), [-Replication-](https://www.openicpsr.org/openicpsr/project/116366/version/V1/view)

- 丹麦的数据，孩子出生对劳动力市场性别不平等的影响。
- 发现：孩子的到来导致了长期的性别差距：工资差距大概 20%。
  - 这种差距在最近的 30-40 年中越来越显著。
  - 这种差距是由每周工作的小时数、参与率以及工资率等造成的。

> 更多顶刊可视化: [论文写作](https://www.lianxh.cn/blogs/31.html) &rarr; [论文中因果推断的经典图形](https://www.lianxh.cn/news/0593e9487d93e.html)


--- - --

<!-- backgroundColor: #FFFFF9 -->

![bg left:45% w:600](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/B208-陈卓然-因果推断经典图形-Kleven2019AEAAEA2.png)

![w:800](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/B208-陈卓然-因果推断经典图形-Kleven2019AEAAEB.png)

--- - --
有关 DID 的详细介绍和实现，参见：
- [Qu Zhaopeng, 2020, Lecture 7B: Difference in Differences](https://byelenin.github.io/MicroEconometrics/Slides/GradMetrics_2020_Lec7B.pdf)
- [Scott Cunningham, DID - Slides and Codes](https://github.com/scunning1975/codechella)
- 专题：[倍分法DID](https://www.lianxh.cn/blogs/39.html)
--- - --
<!-- backgroundColor: white -->
## RDD：断点回归
![20221209134141 w:800](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209134141.png)


--- - --

### RDD：扩展阅读



- 专题：[断点回归RDD](https://www.lianxh.cn/blogs/40.html)
  - [Stata：RDD与RKD的最优模型选择-pzms](https://www.lianxh.cn/news/c4a4360380d3b.html)
  - [Stata：RDD-DID-断点回归与倍分法完美结合](https://www.lianxh.cn/news/18196c85552c9.html)
  - [Stata+R：一文读懂精确断点回归-RDD](https://www.lianxh.cn/news/96fb6b7e847e1.html)
  - [RDD：断点回归可以加入控制变量吗？](https://www.lianxh.cn/news/39b87ee213889.html)
  - [断点回归RDD：样本少时如何做？](https://www.lianxh.cn/news/d5de5ddc2cf7b.html)
  - [Stata：断点回归分析-RDD-文献和命令](https://www.lianxh.cn/news/2fe34683d2030.html)
  - [Stata：断点回归RDD简明教程](https://www.lianxh.cn/news/789f031b0c110.html)
  - [RDD：断点回归的非参数估计及Stata实现](https://www.lianxh.cn/news/f51c762f78644.html)
  - [Stata: 两本断点回归分析 (RDD) 易懂教程](https://www.lianxh.cn/news/022ff1000f455.html)
  - [Stata: 断点回归 (RDD) 中的平滑性检验](https://www.lianxh.cn/news/4d4afce3f6af1.html)




--- - --

## 合成控制

--- - --

### 合成控制法-1：基本思想

<br>

![w:1000](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Abadie-2010-Fig01-02.png)

> Source: Abadie et al. ([2010](https://web.stanford.edu/~jhain/Paper/JASA2010.pdf), JASA), 加州禁烟的政策效果，Figure 1, 2

--- - --

### 合成控制法-2：政策效果估算

$$\small
\widehat{\tau}_{1t}={y}_{1t}-\widehat{y}_{1t}^{N} = Gap_{1t}
$$

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Abadie-2010-Fig02-03.png)

--- - --

### 合成控制法-3：安慰剂检验
> Source: Abadie et al. ([2010](https://web.stanford.edu/~jhain/Paper/JASA2010.pdf))

- **左图** (Fig 6)：29 个州 $\small(\text{MPSE}_j^{Pre}<{\color{red}{5}}\times \text{MPSE}_{C\!A}^{Pre})$
- **右图** (Fig 7)：19 个州 $\small(\text{MPSE}_j^{Pre}<{\color{darkred}{2}}\times \text{MPSE}_{C\!A}^{Pre})$

![w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Abadie-2010-Fig06-07.png)
--- - --

### 合成控制法-4：参考资料

<font color=darkblue size=5.5>

- 专题：[合成控制法](https://www.lianxh.cn/blogs/42.html)
  - [Stata：合成控制法的预测区间-scpi](https://www.lianxh.cn/news/bcf8d62073675.html)
  - [合成控制法简介](https://www.lianxh.cn/news/f0c24b225eb69.html)
  - [Stata：纠偏合成控制法介绍-allsynth](https://www.lianxh.cn/news/e99069b43f0ce.html)
  - [Synth_Runner命令：合成控制法高效实现](https://www.lianxh.cn/news/db3d2785cd5c0.html)
  - [Stata：合成控制法程序分享](https://www.lianxh.cn/news/bf1839debd082.html)
  - [Stata：合成控制法-synth-命令无法加载-plugin-的解决办法](https://www.lianxh.cn/news/d7c94c7777226.html)
  - [合成控制法 (Synthetic Control Method) 及 Stata实现](https://www.lianxh.cn/news/9e1bb97a57041.html)
- 专题：[倍分法DID](https://www.lianxh.cn/blogs/39.html)
  - [Stata+R：合成DID原理及实现-sdid](https://www.lianxh.cn/news/6e5904b0743e8.html)







--- - --
<!-- backgroundColor: #C1CDCD -->
## 数据清洗
- 离群值
- 缺失值
--- - --
<!-- backgroundColor: white -->
## 离群值

- 界定
  
- 识别
- 应对


![bg right:70% w:750](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209092609.png)

--- - --

<br>


![bg left:71% w:890](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Anscombe1973_Figs.png)




> Source: [Anscombe, 1973, p.17](https://www.sjsu.edu/faculty/gerstman/StatPrimer/anscombe1973.pdf)



--- - --
<!-- backgroundColor: white -->
### 离群值：应对方法

- $x$ &rarr; $ln(x)$
- 截尾处理 (Trimming)
- 缩尾处理 (Winsoring) 
- 离散化和标准化

  - [winsor2：离群值和异常值的缩尾处理](https://www.lianxh.cn/news/29b1139efd0bb.html)
  - [Stata：离群值！离群值？离群值！](https://www.lianxh.cn/news/6fd920ed55bf0.html)

--- - --

### 离群值：log 转换
![w:900](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/gr_Hist_wage_lnw.png)

--- - --

#### 缩尾 v.s 截尾

![w:990](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/trim_winsor_001.png)


--- - --
<!-- backgroundColor: white -->
### 离群值：离散化和标准化

<br>

> 您的家庭年收入？ &emsp;   5, 10, 100, 200, ……, 700
  - 离散化：连续变量 &rarr; 序别变量 / 虚拟变量
  
  - 标准化：$(0, +\infty)$ &rarr; $(-\infty,+\infty)$ &emsp;  $x_i^{s} = (x_i-\bar{x})/sd(x)\sim N(0,1)$
  - 限定范围：$(0, +\infty)$ &rarr; $(0,1)$ &emsp;  $x_i^{r} = (x_{max}-{x}_i)/x_{max}$

<br>

> 一年中交通违法的次数？去医院的次数？

<br>


--- - --
<!-- backgroundColor: #C1CDCD -->
## 缺失值
- 模式
- 缺失机制
- 补漏/补救 方法


--- - --
<!-- backgroundColor: white -->
### 缺失值：模式
- 单一模式 (Univariate Pattern)：缺失值均属于同一个变量
- 单调模式 (Monotone Pattern)：面板数据中被调查对象退出调查且后续不再返回
- 一般模式 (General Pattern)：缺失值在数据集中随机发生
  
<center>  

![20221209095150](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209095150.png)

--- - --
### 缺失值：机制 
- MCAR：完全随机缺失数据 (Missing Completely at Random)
  - 数据缺失的概率与数据集中的任何数据均无关；
- MAR：随机缺失数据 (Missing at Random)
  - 变量 $\small Y$ 数据缺失的概率与模型中其他变量相关，但与变量 $\small Y$ 本身无关；
- MNAR：非随机缺失数据 (Missing Not at Random)
  - 变量 $\small Y$ 数据缺失的概率即使在控制其他变量以后，仍与 $\small Y$ 本身有关。
--- - --
### 缺失值：机制 - 例子

![bg right:65% w:620](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209095906.png)


--- - --
### 缺失值：应对方法

#### M1：直接删除法

直接删除法中最常用的方法为成列删除和成对删除：

- 成列删除 (Listwise Deletion, Complete-Case Analysis)：删除所有存在缺失值的个体；
- 成对删除 (Pairwise Deletion, Available-Case Analysis)：只删除需要用到的变量存在缺失值的个体。

直接删除法简单、易操作，但是它们要求缺失数据是「完全随机缺失数据 (MCAR)」，否则会产生明显的偏误。此外，即使缺失数据满足 MCAR 条件，直接删除法会造成数据的浪费，大大削弱分析的效能 (reduce power)。

--- - --
### 缺失值：应对方法
#### M2：单一插补法

单一插补 (Single Imputation) 名称的由来是因为这些方法为每个缺失的数据点生成一个单一的替换值，与多重插补 (Multiple Imputation) 是不同的。多重插补是创建数据集的多个副本，并对每个副本使用不同的估计方法来估算缺失值。

- 算术平均插补法 (Arithmetic Mean Imputation)；
- 回归插补法 (Regression Imputation)；
- 随机回归插补法 (Stochastic Regression Imputation)。
- eg. 小朋友的身高 (Mum: 170cm, Dad: 175cm, Gogo: 171cm)

--- - --
### 缺失值：应对方法-多重插补法 

![20221209123549](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209123549.png)




Source: [Gabriella, 2021, S-in-M](https://onlinelibrary.wiley.com/doi/10.1002/sim.9231)



--- - --

![20221209123704](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209123704.png)



Source: [Gabriella, 2021, S-in-M](https://onlinelibrary.wiley.com/doi/10.1002/sim.9231)



--- - --

#### M3：多重插补法
- 插补阶段 (Imputation Phase)：创建数据集的 m 个副本，每个副本中包含对缺失值的不同估计；
- 分析阶段 (Analysis Phase)：将分析模型拟合到 m 个数据集中；
- 汇集阶段 (Pooling Phase)：使用 Rubin 法则将 m 组结果汇集成一个结果。

--- - --
<!-- backgroundColor: white -->
### 缺失值：参考资料
  - [Stata：fillmissing-缺失值填充-数值和文字的前后填充！](https://www.lianxh.cn/news/b89837b74ffcc.html)
  - [Stata数据处理：缺失值与多重补漏分析（一）](https://www.lianxh.cn/news/716da36e2cb70.html)
  - [Stata数据处理：缺失值与多重补漏分析（二）](https://www.lianxh.cn/news/c3e8128be3072.html)
  - [Stata数据处理：缺失值与多重补漏分析（三）](https://www.lianxh.cn/news/3b79ea976a27e.html)

--- - --
<!-- backgroundColor: #C1CDCD -->
## 数据 &rarr; 变量 (Variables / Labels)

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 数据 &rarr; 变量 (Variables / Labels)
- 目的
  - 转换 &rarr; 服从某种分布
  - 克服离群值
  - 离散化 &rarr; 便于分类 &rarr; 随机森林 / 神经网络 / 预测

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 数据 &rarr; 变量 (Variables / Labels)
- 结构化数据
  - `gen x_sq = x*x`
  - `gen lnx = ln(x)`
  - `gen Default = DD < 0.5`
  - `recode level (1 2 3= 1 "Bad") (4/7 = 2 "Mid") (8/20 = 3 "Good")`

--- - --
<!-- backgroundColor: #FFFFF9 -->
### 数据 &rarr; 变量 (Variables / Labels)
- 非结构化数据
  - 文本 
    - 词频 | 情绪 | 话题分类
    - 文本相似度 | 一致性 | 明确性 
  - 语音 / 视频

--- - --

<center>

![w:800](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209105825.png)

<font color=darkblue size=4>

> Source: [达观数据](http://www.datagrand.com/products/text-mining/)




--- - --

## 变量筛选

- 信息准则：AIC, BIC, HQIC
- 模型平均化：Model Averaging 
- 惩罚回归：岭回归, Lasso 回归
- 相对重要性分析：Dominance Analysis




--- - --

## 降维方法

![20221209012519](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20221209012519.png)

> Source: [github-machine-learning-mindmap](https://raw.githubusercontent.com/dformoso/machine-learning-mindmap/master/images/Models.png)

--- - --
<!-- backgroundColor: #D2FDCD -->
# 附：参考资料和链接 

--- - --
<!-- backgroundColor: white -->
## data analysis tools 
<font color=darkgreen size=5.5>

1. [Microsoft Excel](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#microsoft-excel)
2. [Python](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#python)
3. [R](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#r)
4. [Jupyter Notebook](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#jupyter-notebook)
5. [Apache Spark](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#apache-spark)
6. [SAS](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#sas)
7. [Microsoft Power BI](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#microsoft-power-bi)
8. [Tableau](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#tableau)
9. [KNIME](https://careerfoundry.com/en/blog/data-analytics/data-analytics-tools/#knime)



> Other ranks:   
> [best 10](https://www.forbes.com/advisor/business/software/best-data-analytics-tools/) | [Top 10 Tools in 2022](https://www.spiceworks.com/tech/big-data/articles/data-analysis-tools/) | [Top 24 tools](https://www.stitchdata.com/resources/data-analysis-tools/) | [Big Data Tools](https://www.datamation.com/big-data/data-analytics-tools/) | [28 Best](https://solutionsreview.com/business-intelligence/the-best-data-analytics-software-and-top-tools/)

--- - --

## 一些链接
- **Github**: [Data Analysis](https://github.com/search?q=data+analysis) &rarr; [200+ Topics](https://github.com/search?q=data+analysis&type=topics) | [26w+ repositories](https://github.com/search?o=desc&p=3&q=data+analysis&s=stars&type=Repositories)
- [Data Science Tutorials](https://www.educba.com/data-science/data-science-tutorials/)

--- - --

## Books - 统计、计量和数据分析
- [数据处理-统计-计量书单](https://gitee.com/arlionn/stata/wikis/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86-%E7%BB%9F%E8%AE%A1-%E8%AE%A1%E9%87%8F%E4%B9%A6%E5%8D%95.md)
- [ZYL-Harry](https://github.com/ZYL-Harry) / [Machine_Learning_study](https://github.com/ZYL-Harry/Machine_Learning_study/wiki) &rarr; OLS, Logit, Neural Networks, ML

--- - --

### 计量经济学
  - Hansen B E . 2021. **Econometrics**. Princeton University Press. [Data and Contents](https://www.ssc.wisc.edu/~bhansen/econometrics/), [PDF](https://www.ssc.wisc.edu/~bhansen/econometrics/Econometrics.pdf), chap 2-5 &#x1F34E; 
  - Rubinstein, Y. 2016, Slides, [The Regression Tool](https://yonarubinstein.files.wordpress.com/2016/07/the-regression-tool1.pdf)
  - Chapter 2, Linear Models for Continuous Data, [PDF](https://data.princeton.edu/wws509/notes/c2.pdf), PDF 讲义
  - James, G., D. Witten, T. Hastie, R. Tibshirani. An introduction to statistical learning[M]. Springer, 2013. [PDF](https://link.springer.com/content/pdf/10.1007/978-1-0716-1418-1.pdf)
  - Stewart, B., 2020. Simple Linear Regression, [Slides](https://scholar.princeton.edu/sites/default/files/bstewart/files/lecture5_handout2020.pdf)

--- - --

## Codes and Projects
### Github 仓库 (1)


- [WillKoehrsen/Data-Analysis](https://github.com/WillKoehrsen/Data-Analysis)
  - Data Science Using Python
- [biolab/orange3](https://github.com/biolab/orange3) 
  - Interactive data analysis
- [fonnesbeck/statistical-analysis-python-tutorial](https://github.com/fonnesbeck/statistical-analysis-python-tutorial)
  - Statistical Data Analysis in Python
- [ZYL-Harry](https://github.com/ZYL-Harry)/[Machine_Learning_study](https://github.com/ZYL-Harry/Machine_Learning_study/wiki)
- [wesm/pydata-book](https://github.com/wesm/pydata-book)
  - Materials and IPython notebooks for "Python for Data Analysis" by Wes McKinney, published by O'Reilly Media
- [keplergl/kepler.gl](https://github.com/keplergl/kepler.gl)
  - Kepler.gl is a powerful open source geospatial analysis tool for large-scale data sets.




--- - --

### Github Stars (2)


- [google/pprof](https://github.com/google/pprof)
  - `pprof` is a tool for visualization and analysis of profiling data
- [tangyudi/Ai-Learn](https://github.com/tangyudi/Ai-Learn)
  - 人工智能学习路线图，整理近200个实战案例与项目，免费提供配套教材，零基础入门，就业实战！包括：Python，数学，机器学习，数据分析，深度学习，计算机视觉，自然语言处理
- [iamseancheney/python_for_data_analysis_2nd_chinese_version](https://github.com/iamseancheney/python_for_data_analysis_2nd_chinese_version)
  - 《利用Python进行数据分析·第2版》
- [ujjwalkarn/Data Science Python](https://github.com/ujjwalkarn/DataSciencePython)
  - Common data analysis and machine learning tasks using python
- [rhiever/Data-Analysis-and-Machine-Learning-Projects](https://github.com/rhiever/Data-Analysis-and-Machine-Learning-Projects)
  - Code, and data for data analysis and machine learning projects.

